jQuery.extend({startSync:function(){(function(n){"object"===typeof exports?module.exports=n():"function"===typeof define&&define.amd?define(n):(window.WatchJS=n(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)})(function(){function n(){v=null;for(var a=0;a<w.length;a++)w[a]();w.length=0}var k={noMore:!1,useDirtyCheck:!1},m=[],l=[],x=[],D=!1;try{D=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(a){}var q=function(a){var b=
{};return a&&"[object Function]"==b.toString.call(a)},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)},y=function(a){return"[object Object]"==={}.toString.apply(a)},A=function(a,b){var c=[],d=[];if("string"!=typeof a&&"string"!=typeof b){if(g(a))for(var e=0;e<a.length;e++)void 0===b[e]&&c.push(e);else for(e in a)a.hasOwnProperty(e)&&void 0===b[e]&&c.push(e);if(g(b))for(var f=0;f<b.length;f++)void 0===a[f]&&d.push(f);else for(f in b)b.hasOwnProperty(f)&&void 0===a[f]&&d.push(f)}return{added:c,
removed:d}},r=function(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor(),c;for(c in a)b[c]=a[c];return b},R=function(a,b,c,d){try{Object.observe(a,function(a){a.forEach(function(a){a.name===b&&d(a.object[a.name])})})}catch(e){try{Object.defineProperty(a,b,{get:c,set:function(a){d.call(this,a,!0)},enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(a,b,c),Object.prototype.__defineSetter__.call(a,b,function(a){d.call(this,a,!0)})}catch(h){I(a,b,d)}}}},
J=function(a,b,c){try{Object.defineProperty(a,b,{enumerable:!1,configurable:!0,writable:!1,value:c})}catch(d){a[b]=c}},I=function(a,b,c){l[l.length]={prop:b,object:a,orig:r(a[b]),callback:c}},p=function(a,b,c,d){if("string"!=typeof a&&(a instanceof Object||g(a))){if(g(a)){if(K(a,"__watchall__",b,c),void 0===c||0<c)for(var e=0;e<a.length;e++)p(a[e],b,c,d)}else{var f=[];for(e in a)"$val"==e||!D&&"watchers"===e||Object.prototype.hasOwnProperty.call(a,e)&&f.push(e);B(a,f,b,c,d)}d&&L(a,"$$watchlengthsubjectroot",
b,c)}},B=function(a,b,c,d,e){if("string"!=typeof a&&(a instanceof Object||g(a)))for(var f=0;f<b.length;f++)E(a,b[f],c,d,e)},E=function(a,b,c,d,e){"string"!=typeof a&&(a instanceof Object||g(a))&&!q(a[b])&&(null!=a[b]&&(void 0===d||0<d)&&p(a[b],c,void 0!==d?d-1:d),K(a,b,c,d),e&&(void 0===d||0<d)&&L(a,b,c,d))},S=function(a,b){if(!(a instanceof String)&&(a instanceof Object||g(a)))if(g(a)){for(var c=["__watchall__"],d=0;d<a.length;d++)c.push(d);F(a,c,b)}else{var e=function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&
(a[d]instanceof Object?e(a[d]):c.push(d));F(a,c,b)};e(a)}},F=function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&M(a,b[d],c)},w=[],v=null,N=function(){v||(v=setTimeout(n));return v},O=function(a){null==v&&N();w[w.length]=a},G=function(a,b,c,d){var e=null,f=-1,h=g(a);p(a,function(d,c,t,u){var g=N();f!==g&&(f=g,e={type:"update"},e.value=a,e.splices=null,O(function(){b.call(this,e);e=null}));if(h&&a===this&&null!==e){if("pop"===c||"shift"===c)t=[],u=[u];else if("push"===c||"unshift"===c)t=[t],u=[];else if("splice"!==
c)return;e.splices||(e.splices=[]);e.splices[e.splices.length]={index:d,deleteCount:u?u.length:0,addedCount:t?t.length:0,added:t,deleted:u}}},1==c?void 0:0,d)},T=function(a,b,c,d,e){a&&b&&(E(a,b,function(a,b,C,k){a={type:"update"};a.value=C;a.oldvalue=k;(d&&y(C)||g(C))&&G(C,c,d,e);c.call(this,a)},0),(d&&y(a[b])||g(a[b]))&&G(a[b],c,d,e))},K=function(a,b,c,d){var e=!1,f=g(a);a.watchers||(J(a,"watchers",{}),f&&U(a,function(c,e,f,h){P(a,c,e,f,h);if(0!==d&&f&&(y(f)||g(f))){var k,l;c=a.watchers[b];if(h=
a.watchers.__watchall__)c=c?c.concat(h):h;l=c?c.length:0;for(h=0;h<l;h++)if("splice"!==e)p(f,c[h],void 0===d?d:d-1);else for(k=0;k<f.length;k++)p(f[k],c[h],void 0===d?d:d-1)}}));a.watchers[b]||(a.watchers[b]=[],f||(e=!0));for(f=0;f<a.watchers[b].length;f++)if(a.watchers[b][f]===c)return;a.watchers[b].push(c);if(e){var h=a[b];c=function(){return h};e=function(c,e){var f=h;h=c;if(0!==d&&a[b]&&(y(a[b])||g(a[b]))&&!a[b].watchers){var l,m=a.watchers[b].length;for(l=0;l<m;l++)p(a[b],a.watchers[b][l],void 0===
d?d:d-1)}a.watchers&&(a.watchers.__wjs_suspend__||a.watchers["__wjs_suspend__"+b])?V(a,b):k.noMore||f===c||(e?P(a,b,"set",c,f):z(a,b,"set",c,f),k.noMore=!1)};k.useDirtyCheck?I(a,b,e):R(a,b,c,e)}},z=function(a,b,c,d,e){if(void 0!==b){var f,h=a.watchers[b];if(f=a.watchers.__watchall__)h=h?h.concat(f):f;f=h?h.length:0;for(var g=0;g<f;g++)h[g].call(a,b,c,d,e)}else for(b in a)a.hasOwnProperty(b)&&z(a,b,c,d,e)},Q="pop push reverse shift sort slice unshift splice".split(" "),W=function(a,b,c,d){J(a,c,function(){var e=
0,f,h,g;if("splice"===c){g=arguments[0];h=a.slice(g,g+arguments[1]);f=[];for(e=2;e<arguments.length;e++)f[e-2]=arguments[e];e=g}else f=0<arguments.length?arguments[0]:void 0;g=b.apply(a,arguments);"slice"!==c&&("pop"===c?(h=g,e=a.length):"push"===c?e=a.length-1:"shift"===c?h=g:"unshift"!==c&&void 0===f&&(f=g),d.call(a,e,c,f,h));return g})},U=function(a,b){if(q(b)&&a&&!(a instanceof String)&&g(a))for(var c=Q.length,d;c--;)d=Q[c],W(a,a[d],d,b)},M=function(a,b,c){if(a.watchers[b])if(void 0===c)delete a.watchers[b];
else for(var d=0;d<a.watchers[b].length;d++)a.watchers[b][d]==c&&a.watchers[b].splice(d,1);for(d=0;d<m.length;d++){var e=m[d];e.obj==a&&e.prop==b&&e.watcher==c&&m.splice(d,1)}for(c=0;c<l.length;c++)d=l[c],e=d.object.watchers,(d=d.object==a&&d.prop==b&&e&&(!e[b]||0==e[b].length))&&l.splice(c,1)},V=function(a,b){O(function(){delete a.watchers.__wjs_suspend__;delete a.watchers["__wjs_suspend__"+b]})},H=null,P=function(a,b,c,d,e){x[x.length]={obj:a,prop:b,mode:c,newval:d,oldval:e};null===H&&(H=setTimeout(X))},
X=function(){var a=null;H=null;for(var b=0;b<x.length;b++)a=x[b],z(a.obj,a.prop,a.mode,a.newval,a.oldval);a&&(x=[])},L=function(a,b,c,d){var e;e="$$watchlengthsubjectroot"===b?r(a):r(a[b]);m.push({obj:a,prop:b,actual:e,watcher:c,level:d})};setInterval(function(){for(var a=0;a<m.length;a++){var b=m[a];if("$$watchlengthsubjectroot"===b.prop){var c=A(b.obj,b.actual);if(c.added.length||c.removed.length)c.added.length&&B(b.obj,c.added,b.watcher,b.level-1,!0),b.watcher.call(b.obj,"root","differentattr",
c,b.actual);b.actual=r(b.obj)}else{c=A(b.obj[b.prop],b.actual);if(c.added.length||c.removed.length){if(c.added.length)for(var d=0;d<b.obj.watchers[b.prop].length;d++)B(b.obj[b.prop],c.added,b.obj.watchers[b.prop][d],b.level-1,!0);z(b.obj,b.prop,"differentattr",c,b.actual)}b.actual=r(b.obj[b.prop])}}if(0<l.length)for(a=0;a<l.length;a++){var b=l[a],c=b.object[b.prop],d=b.orig,e=c,f=void 0,g=!0;if(d!==e)if(y(d))for(f in d){if((D||"watchers"!==f)&&d[f]!==e[f]){g=!1;break}}else g=!1;g||(b.orig=r(c),b.callback(c))}},
50);k.watch=function(){q(arguments[1])?p.apply(this,arguments):g(arguments[1])?B.apply(this,arguments):E.apply(this,arguments)};k.unwatch=function(){q(arguments[1])?S.apply(this,arguments):g(arguments[1])?F.apply(this,arguments):M.apply(this,arguments)};k.callWatchers=z;k.suspend=function(a,b){a.watchers&&(a.watchers["__wjs_suspend__"+(void 0!==b?b:"")]=!0)};k.onChange=function(){(q(arguments[2])?T:G).apply(this,arguments)};return k});var A=window[$("form[syncwith]").attr("syncwith")]={};$("form[syncwith] input").each(function(n,
k){var m=$(this).attr("modal");m&&(WatchJS.watch(A,m,function(k,m,n,q){$("input[modal='"+k+"']").each(function(){$(this).val(n)})}),$(k).on("keyup",function(){A[$(this).attr("modal")]=$(this).val()}))})}});
